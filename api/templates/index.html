<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Shobha Sarees - Photo Maker</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body class="theme">
    <nav class="navbar glass">
        <div class="nav-left">
            <button id="globalHamburger" class="nav-hamburger" aria-label="Menu">
                <span></span><span></span><span></span>
            </button>
            <a href="/" class="nav-brand">
                <img src="/static/logo.png" alt="Logo" class="nav-logo" id="navLogo">
                <span class="nav-title">Shobha Sarees</span>
            </a>
        </div>
        <div class="nav-right">
            <button id="themeSwitchGlobal" class="theme-switch" role="switch" aria-checked="false">
                <div class="switch-track">
                    <span class="switch-icon">üåô</span>
                    <span class="switch-icon">‚òÄÔ∏è</span>
                    <div class="switch-thumb"></div>
                </div>
            </button>
        </div>
    </nav>

    <aside class="glassmorphic-sidebar glass" id="glassmorphicSidebar" aria-hidden="true">
        <div class="sidebar-header-improved">
            <img src="/static/logo.png" alt="Logo" class="sidebar-logo-improved" id="sidebarLogo">
            <div class="sidebar-brand">
                <h2 class="brand-name">Shobha Sarees</h2>
                <p class="brand-subtitle">Photo Maker</p>
            </div>
        </div>
        <nav class="sidebar-navigation">
            <a href="/" class="nav-item">
                <span class="nav-icon">üè†</span>
                <span class="nav-text">Home</span>
            </a>
            <a href="/app" class="nav-item">
                <span class="nav-icon">üì∏</span>
                <span class="nav-text">Photo Maker</span>
            </a>
        </nav>
        <div class="sidebar-footer">
            <form method="post" action="/logout">
                <button type="submit" class="logout-btn-improved">
                    <span class="nav-icon">üö™</span>
                    <span class="nav-text">Logout</span>
                </button>
            </form>
        </div>
    </aside>

    <div class="sidebar-overlay" id="sidebarOverlay" aria-hidden="true"></div>

    <main class="app-container-glassmorphic" id="appLogoBg">
        <div class="app-logo-bg"></div>
        <div class="photo-maker-overlay glass">
            <header class="app-header-glass">
                <h1 class="app-title">Photo Maker</h1>
                <p class="app-subtitle">Upload and process saree photos</p>
            </header>

            <form id="uploadForm" class="photo-maker-form" novalidate>
                <div class="form-row-glass">
                    <div class="field-glass">
                        <label for="catalog-select" class="label-glass">Select Catalog</label>
                        <div class="select-wrap-premium">
                            <select id="catalog-select" name="catalog" class="select-glass" required>
                                <option value="" disabled selected>Choose a catalog...</option>
                                {% for catalog in catalogs %}
                                <option value="{{ catalog }}">{{ catalog }}</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>

                    <div class="field-glass">
                        <label for="fileInput" class="label-glass">Upload Images</label>
                        <div id="dropzone" class="dropzone-glass" tabindex="0">
                            <input type="file" id="fileInput" name="files" accept="image/*" multiple>
                            <div class="dropzone-content">
                                <svg class="dz-icon-glass" viewBox="0 0 24 24">
                                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                                </svg>
                                <div class="upload-title">Drop images here or click to browse</div>
                                <div class="upload-subtitle">Large images will be automatically compressed</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Image Preview Area -->
                <div class="field-glass">
                    <div class="label-glass">Image Preview</div>
                    <div id="previewViewport" class="viewport-glass">
                        <div id="previewGrid" class="vgrid"></div>
                        <div id="previewSpacer" class="spacer"></div>
                    </div>
                </div>

                <div class="action-buttons-glass">
                    <button type="button" class="btn-glass ghost" id="openCameraBtn">
                        <div class="btn-content">
                            <span class="btn-icon">üì∑</span>
                            <span>Open Camera</span>
                        </div>
                    </button>
                    
                    <button type="button" class="btn-glass ghost" id="clearAllBtn">
                        <div class="btn-content">
                            <span class="btn-icon">üóëÔ∏è</span>
                            <span>Clear All</span>
                        </div>
                    </button>
                </div>

                <div class="actions-glass">
                    <button type="submit" class="glassmorphic-btn" id="processBtn">
                        <div class="btn-content">
                            <span class="btn-icon">‚ö°</span>
                            <span>Process Images</span>
                        </div>
                        <div class="btn-glow"></div>
                    </button>
                </div>
            </form>

            <!-- Progress Container -->
            <div id="progressContainer" class="progress-container" style="display: none;">
                <div class="progress-header">
                    <div class="progress-title">Processing Images...</div>
                    <div id="progressPercentage" class="progress-percentage">0%</div>
                </div>
                <div class="progress-bar-premium">
                    <div id="progressFill" class="progress-fill-premium"></div>
                </div>
                <div id="progressStatus" class="progress-status">Initializing...</div>
            </div>

            <!-- Results Panel -->
            <section id="resultsPanel" class="results-panel-glass" style="display: none;">
                <h2 class="panel-title-glass">Processing Results</h2>
                <div id="resultsGrid" class="results-grid-glass"></div>
            </section>
        </div>
    </main>

    <!-- Camera Modal -->
    <div id="cameraModal" class="modal" style="display: none;">
        <div class="modal-card">
            <h3>Camera Capture</h3>
            <div class="camera-wrap">
                <video id="cameraVideo" autoplay playsinline muted style="width: 100%; max-width: 400px; border-radius: 12px;"></video>
                <canvas id="cameraCanvas" style="display: none;"></canvas>
            </div>
            <div class="camera-actions">
                <button id="captureBtn" class="btn-glass primary">
                    <span>üì∏ Capture</span>
                </button>
                <button id="closeCameraBtn" class="btn-glass ghost">
                    <span>‚úï Close</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastHost" class="toast-host"></div>

    <script src="/static/global.js"></script>
    <script src="/static/app.js"></script>
</body>
</html>
